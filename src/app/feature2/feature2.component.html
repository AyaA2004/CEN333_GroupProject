<m-container>
    <h2> Add Section </h2>

<form class="pure-form pure-form-aligned"  #userForm="ngForm" (ngSubmit)="add(userForm,'local')">
    <fieldset>
        <div class="pure-control-group">
            <label for="course"> Course </label>
            <select id="course" name="course" [(ngModel)]="courseSchedule.course" required #coursecontrol="ngModel">
            <option value="" disabled selected>Select Course</option>
              <option value="CSC202">CSC202</option>
              <option value="CEN333">CEN333</option>
              <option value="CEN201">CEN201</option>
              <option value="CEN202">CEN201</option>
              <option value="CSC203">CSC203</option>
          </select>
            <span class="error-message" *ngIf="coursecontrol.invalid && coursecontrol.touched"> 
            <small *ngIf="userForm.controls['course'].errors?.['required']"> Required </small>

            </span>
        </div>

        <div class="pure-control-group">
            <label for="instructor"> Instructor </label>
            <input required pattern = "^Dr\.+[A-Z][a-z]+[A-Z][a-z]+$" type="text" id="instructor" [(ngModel)]="courseSchedule.instructor" name="instructor" #instructorcontrol="ngModel" placeholder="Dr. Mohamed Ghazal">
            <span class="error-message" *ngIf="instructorcontrol.invalid && instructorcontrol.touched"> 
                <small *ngIf="instructorcontrol.errors?.['required']"> Required </small>
            </span>
        </div>

        <div class="pure-control-group">
            <label for="sectionNumber"> Section </label>
            <input required pattern ="^[0-9]+$" min="40" max="75" id="sectionNumber" [(ngModel)]="courseSchedule.sectionNumber" name="section" #sectioncontrol="ngModel" placeholder="40-74 eg. 51">
            <span class="error-message" *ngIf="sectioncontrol.invalid && sectioncontrol.touched"> 
                <small *ngIf="sectioncontrol.errors?.['required']"> Required </small>
                <small *ngIf="sectioncontrol.errors?.['min']"> From 40-75 section numbers </small>
                <small *ngIf="sectioncontrol.errors?.['max']"> Up until section 75 </small>
           
            </span>
        </div>

        <div class="pure-control-group">
          <label for="capacity">Capacity</label><br>
          <select id="capacity" name="capacity" [(ngModel)]="courseSchedule.capacity" required #capacitycontrol="ngModel">
              <option value="" disabled selected>Select capacity</option>
              <option value="Regular">Regular</option>
              <option value="Large">Large</option>
              <option value="Mega">Mega</option>
          </select>
        <span class="error-message" *ngIf="capacitycontrol.invalid && capacitycontrol.touched"> 
        <small *ngIf="capacitycontrol.errors?.['required']"> Required </small>
        </span>
        </div>
  
      <div>
          <label for="timeSlot">Time Slot</label><br>
          <input required type="number" min="1" max="14" id="timeSlot" [(ngModel)]="courseSchedule.timeSlot" name="timeSlot" #timeSlotcontrol="ngModel" placeholder="1-14">
          <span class="error-message" *ngIf="timeSlotcontrol.invalid && timeSlotcontrol.touched"> 
                <small *ngIf="timeSlotcontrol.errors?.['required']"> Required </small>
                <small *ngIf="timeSlotcontrol.errors?.['min']"> There are 14 time slots </small>
                <small *ngIf="timeSlotcontrol.errors?.['max']"> There are only 14 time slots </small>
           </span>
      </div>
  
      <div>
          <label for="campus">Campus</label><br>
          <select id="campus" name="campus" [(ngModel)]="courseSchedule.campus" required>
              <option value="" disabled selected>Select campus</option>
              <option value="Abu Dhabi">Abu Dhabi</option>
              <option value="Al Ain">Al Ain</option>
          </select>
      </div>
  
      <div style="align-self: end;">
        <button class="pure-button pure-button-primary" (click)="add(userForm, 'local')">
            Add Section
          </button>
        </div>
          <div style="align-self: end;">
          <button class="pure-button pure-button-primary" (click)="add(userForm, 'remote')">
            Add Section to Firebase
          </button>
          </div>
          <div style="align-self: end;">
            <m-aha *ngIf="successMessage" type="success" header="Success">
                Course Added Successfully
                </m-aha>
            </div> 

            <div style="align-self: end;">
                <m-aha *ngIf="errorMessage" type="success" header="Success">
                    Couldn't Add Course
                    </m-aha>
                </div> 
    </fieldset>

    <h1>Add Courses</h1>
    <table class="pure-table pure-table-bordered">
        <thead>
            <tr>
                <th>Course</th>
                <th>Instructor</th>
                <th>Section</th>
                <th>Capacity</th>
                <th>Time Slot</th>
                <th>Campus</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let course of localListOfListOfCourseSchedule">
                <td>{{course.course}}</td>
                <td>{{course.instructor}}</td>
                <td>{{course.sectionNumber}}</td>
                <td>{{course.capacity}}</td>
                <td>{{course.timeSlot}}</td>
                <td>{{course.campus}}</td>
                <td>
                  <button class="pure-button button-error" (click)="remove(course, 'local')">
                      X
                  </button>
                  </td>
          </tr>
        </tbody>  
    </table>

    <h1>Add Courses</h1>
    <table class="pure-table pure-table-bordered">
        <thead>
            <tr>
                <th>Course</th>
                <th>Instructor</th>
                <th>Section</th>
                <th>Capacity</th>
                <th>Time Slot</th>
                <th>Campus</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let course of remoteListOfCourseSchedule">
                <td>{{course.course}}</td>
                <td>{{course.instructor}}</td>
                <td>{{course.sectionNumber}}</td>
                <td>{{course.capacity}}</td>
                <td>{{course.timeSlot}}</td>
                <td>{{course.campus}}</td>
                <td>
          </tr>
        </tbody>  
    </table>


</form>     
 </m-container>